(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{568:function(t,s,r){"use strict";r.r(s);var a=r(44),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"vue中的v-html会导致哪些问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vue中的v-html会导致哪些问题"}},[t._v("#")]),t._v(" vue中的v-html会导致哪些问题")]),t._v(" "),r("h3",{attrs:{id:"结论"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#结论"}},[t._v("#")]),t._v(" 结论")]),t._v(" "),r("ol",[r("li",[t._v("v-html更新元素的innerHtml。但是动态渲染任意html容易被xss攻击")]),t._v(" "),r("li",[t._v("v-html动态输入的html片段不会受到scoped-style的作用")]),t._v(" "),r("li",[t._v("如果v-html中存在"),r("code",[t._v("<style>")]),t._v("标签，则可能造成全局样式污染")])]),t._v(" "),r("h3",{attrs:{id:"深入探讨"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#深入探讨"}},[t._v("#")]),t._v(" 深入探讨")]),t._v(" "),r("p",[r("strong",[t._v("关于XSS攻击")]),t._v("\nHTML5规定通过innerHtml动态插入的"),r("code",[t._v("<script>")]),t._v("标签内部的脚本不可以被执行，那为什么vue官方文档仍然提示v-html会造成xss攻击呢？")]),t._v(" "),r("p",[t._v("原因是，有些可以执行的js代码并不一定非要通过"),r("code",[t._v("<script>")]),t._v("标签注入。比如下面的代码：")]),t._v(" "),r("div",{staticClass:"language-js line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img src"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" onerror"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alert(1)"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("p",[t._v("当浏览器解析到该行html代码时，会弹出alert")]),t._v(" "),r("p",[r("strong",[t._v("解决办法")])]),t._v(" "),r("ol",[r("li",[t._v("只渲染可以信任的内容，一切用户输入的内容都不要使用v-html进行动态渲染")]),t._v(" "),r("li",[t._v("使用第三方库将html代码进行转义")])])])}),[],!1,null,null,null);s.default=e.exports}}]);